<?php
declare(strict_types = 1);

namespace {{ projectName }}\Domain\Entity;

use Doctrine\ODM\MongoDB\Mapping\Annotations as Odm;
use Doctrine\ORM\Mapping as Orm;
use Doctrine\ODM\CouchDB\Mapping\Annotations as CouchDB;
use Symfony\Component\Validator\Constraints as Assert;
use Sfynx\DddBundle\Layer\Domain\Generalisation\Traits\TraitTenant;
{% for vo in valueObjects %}use {{ vo.type|trim("\\") }};
{% endfor %}

/**
 * Class {{ entityName }}.
 *
 * @category {{ projectName }}
 * @package Domain
 * @subpackage Entity
 *
 * @Orm\Entity
 * @Orm\Table(name="{{ entityName|lower }}")
 * @Orm\HasLifecycleCallbacks
 * @Odm\Document(collection="{{ entityName }}")
 * @Odm\HasLifecycleCallbacks
 */
class {{ entityName }}
{
    use TraitTenant;
{% set constructParams = "" %}
{% for field in entityFields %}
{% if field.type == "id" %}
{% if field.voName is defined %}

    /**
     * @Since("1")
     * @Orm\Column(type="IdVO")
     * @Orm\Id
     * @Orm\GeneratedValue(strategy="NONE")
     * @Odm\Id(strategy="NONE", type="IdVO")
     *
     * @CouchDB\Id(strategy="ASSIGNED", type="IdVO")
     */
{% else %}

    /**
     * @Since("1")
     * @Orm\Column(type="integer")
     * @Orm\Id
     * @Orm\GeneratedValue(strategy="AUTO")
     * @Odm\Id(strategy="AUTO", type="integer")
     *
     * @CouchDB\Id(strategy="ASSIGNED", type="integer")
     */
{% endif %}
    protected $id;
{% elseif field.type == "valueObject"%}

    /**
     * @Since("1")
     * @Orm\Embedded(class="{{ valueObjects[field.voName].type|trim("\\") }}", columnPrefix="{{ field.name|lower }}_")
     * @Odm\EmbedOne(targetDocument="{{ valueObjects[field.voName].type|trim("\\") }}")
     * @CouchDB\EmbedOne(targetDocument="{{ valueObjects[field.voName].type|trim("\\") }}")
     */
    protected ${{ field.name }};
{% elseif field.type == "string" %}

    /**
     * @Since("1")
     * @Orm\Column(type="string")
     * @Odm\Field(type="string")
     */
    protected ${{ field.name }};
{% elseif field.type == "number" %}

    /**
     * @Since("1")
     * @Orm\Column(type="integer")
     * @Odm\Field(type="integer")
     */
    protected ${{ field.name }};
{% elseif field.type == "boolean" %}

    /**
     * @Since("1")
     * @Orm\Column(type="boolean")
     * @Odm\Field(type="boolean")
     */
    protected ${{ field.name }};
{% endif %}
{% endfor %}

    /**
     * Create a new instance of {{ entityName }} entity.
     * @param int $tenantId
{% for field in entityFields %}     * @param {% if field.type == "id" %}int{% elseif field.type == "IdVO" %}string{% else %}{{ field.type }}{% endif %} ${{ field.name }}
{% endfor %}
     * @return {{ entityName }}
     */
     public static function makeInstance($tenantId, {{ constructorArgs }})
     {
         return new self($tenantId, {% for field in entityFields %}${{ field.name }}{% if loop.index < entityFields|length %}, {% endif %}{% endfor %});
     }

    /**
     * Constructor
     * @param int $tenantId
{% for field in entityFields %}     * @param {% if field.type == "id" %}int{% elseif field.type == "IdVO" %}string{% else %}{{ field.type }}{% endif %} ${{ field.name }}
{% endfor %}
     */
    protected function __construct($tenantId, {{ constructorArgs }})
    {
        $this->setTenantId($tenantId);
{% for field in entityFields %}
{% if field.type == "id" %}
{% if field.voName is defined %}
        $this->{{ field.type }} = new {{ field.voName }}(${{ field.name }});
{% endif %}
{% else %}
        $this->set{{ field.name|ucfirst }}(${{ field.name }});
{% endif %}
{% endfor %}
    }
{% for field in entityFields %}

{% if field.type == "id" or field.type == "idVO" %}
    /**
     * Get the id of entity.
     * @return {% if field.type == "id" %}int
{% else %}string
{% endif %}
     */
    public function get{{ field.type|ucfirst }}()
    {
        return $this->{{ field.type }};
    }

    /**
     * Set the id of entity.
     * @return $this
     */
    public function set{{ field.name|ucfirst }}($value)
    {
        $this->{{ field.name }} = $value;
        return $this;
    }
{% else %}
{% if field.type == "valueObject" %}
{% if valueObjects[field.voName]["name"] == field.voName %}
{% set namespace = valueObjects[field.voName]["type"]|split('\\') %}
{% set key = namespace|length - 1 %}
{% set namespace = namespace[key] %}
{% else %}
{% set namespace = "" %}
{% endif %}
{% else %}
{% set namespace = "" %}
{% endif %}
    /**
     * Get the {{ field.name }} attribute value.
     * @return {{ field.type }}
     */
    public function get{{ field.name|ucfirst }}()
    {
        return $this->{{ field.name }};
    }

    /**
     * Set the {{ field.name|ucfirst }} attribute.
     * @param {% if namespace %}{{ namespace }} {% endif %}{{ field.type }} $value
     * @return $this
     */
    public function set{{ field.name|ucfirst }}({% if namespace %}{{ namespace }} {% endif %}$value)
    {
        $this->{{ field.name }} = $value;
        return $this;
    }
{% endif %}
{% endfor %}
}
