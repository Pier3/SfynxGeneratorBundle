parameters:
    project.{{ projectName|lower }}.{{ entityName|lower }}.orm.repository.factory.class: {{ projectName }}\Domain\Service\{{ entityName }}\Factory\Orm\RepositoryFactory
    project.{{ projectName|lower }}.{{ entityName|lower }}.odm.repository.factory.class: {{ projectName }}\Domain\Service\{{ entityName }}\Factoryy\Odm\RepositoryFactory
    project.{{ projectName|lower }}.{{ entityName|lower }}.couchdb.repository.factory.class: {{ projectName }}\Domain\Service\{{ entityName }}\Factory\CouchDB\RepositoryFactory

    project.{{ projectName|lower }}.{{ entityName|lower }}.manager.class: {{ projectName }}\Domain\Service\{{ entityName }}\Manager\{{ entityName }}Manager
    project.{{ projectName|lower }}.{{ entityName|lower }}.new.workflow.handler.class: {{ projectName }}\Domain\Workflow\{{ entityName }}\Handler\NewWFHandler
    project.{{ projectName|lower }}.{{ entityName|lower }}.update.workflow.handler.class: {{ projectName }}\Domain\Workflow\{{ entityName }}\Handler\UpdateWFHandler
    project.{{ projectName|lower }}.{{ entityName|lower }}.query.all.handler.class: {{ projectName }}\Application\{{ entityName }}\Query\Handler\GetAllQueryHandler
    project.{{ projectName|lower }}.{{ entityName|lower }}.query.searchby.handler.class: {{ projectName }}\Application\{{ entityName }}\Query\Handler\SearchByQueryHandler
    project.{{ projectName|lower }}.{{ entityName|lower }}.query.getbyids.handler.class: {{ projectName }}\Application\{{ entityName }}\Query\Handler\GetByIdsQueryHandler
    project.{{ projectName|lower }}.{{ entityName|lower }}.query.one.handler.class: {{ projectName }}\Application\{{ entityName }}\Query\Handler\GetQueryHandler
    project.{{ projectName|lower }}.{{ entityName|lower }}.command.delete.handler.class: {{ projectName }}\Application\{{ entityName }}\Command\Handler\DeleteCommandHandler
    project.{{ projectName|lower }}.{{ entityName|lower }}.command.delete_many.handler.class: {{ projectName }}\Application\{{ entityName }}\Command\Handler\DeleteManyCommandHandler
    project.{{ projectName|lower }}.{{ entityName|lower }}.command.new.handler.class: {{ projectName }}\Application\{{ entityName }}\Command\Handler\NewCommandHandler
    project.{{ projectName|lower }}.{{ entityName|lower }}.command.update.handler.class: {{ projectName }}\Application\{{ entityName }}\Command\Handler\UpdateCommandHandler
    project.{{ projectName|lower }}.{{ entityName|lower }}.workflow.generate.valueobject.class: {{ projectName }}\Domain\Workflow\{{ entityName }}\Listener\WFGenerateVOListener
    project.{{ projectName|lower }}.{{ entityName|lower }}.workflow.currency.listener.class: {{ projectName }}\Domain\Workflow\{{ entityName }}\Listener\WFGetCurrency
    project.{{ projectName|lower }}.{{ entityName|lower }}.workflow.update.phone.valueobject.class: {{ projectName }}\Domain\Workflow\{{ entityName }}\Listener\WFUpdatePhoneVOListener
    project.{{ projectName|lower }}.{{ entityName|lower }}.workflow.save.entity.class: {{ projectName }}\Domain\Workflow\{{ entityName }}\Listener\WFSaveEntity
    project.{{ projectName|lower }}.{{ entityName|lower }}.workflow.publish.event.class: {{ projectName }}\Domain\Workflow\{{ entityName }}\Listener\WFPublishEvent
    project.{{ projectName|lower }}.{{ entityName|lower }}.command.new.handler.decorator.class: {{ projectName }}\Application\{{ entityName }}\Command\Handler\Decorator\NewCommandHandlerDecorator
    project.{{ projectName|lower }}.{{ entityName|lower }}.command.update.handler.decorator.class: {{ projectName }}\Application\{{ entityName }}\Command\Handler\Decorator\UpdateCommandHandlerDecorator
    project.{{ projectName|lower }}.{{ entityName|lower }}.validation.new.handler.class: {{ projectName }}\Application\{{ entityName }}\Command\Validation\ValidationHandler\NewCommandValidationHandler
    project.{{ projectName|lower }}.{{ entityName|lower }}.validation.update.handler.class: {{ projectName }}\Application\{{ entityName }}\Command\Validation\ValidationHandler\UpdateCommandValidationHandler
    project.{{ projectName|lower }}.{{ entityName|lower }}.spec.new.handler.class: {{ projectName }}\Application\{{ entityName }}\Command\Validation\SpecHandler\NewCommandSpecHandler
    project.{{ projectName|lower }}.{{ entityName|lower }}.spec.update.handler.class: {{ projectName }}\Application\{{ entityName }}\Command\Validation\SpecHandler\UpdateCommandSpecHandler

services:
    #################
    # QUERY HANDLER #
    #################

    #
    # all_{{ entityName }} query handler
    #
    project.{{ projectName|lower }}.{{ entityName|lower }}.query.all.handler:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.query.all.handler.class%
        arguments: ["@project.{{ projectName|lower }}.{{ entityName|lower }}.process.manager"]

    #
    # getbyids_{{ entityName }} query handler
    #
    project.{{ projectName|lower }}.{{ entityName|lower }}.query.getbyids.handler:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.query.getbyids.handler.class%
        arguments: ["@project.{{ projectName|lower }}.{{ entityName|lower }}.process.manager"]

    #
    # one_{{ entityName }} query handler
    #
    project.{{ projectName|lower }}.{{ entityName|lower }}.query.one.handler:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.query.one.handler.class%
        arguments: ["@project.{{ projectName|lower }}.{{ entityName|lower }}.process.manager"]

    #
    # searchBy_{{ entityName }} query handler
    #
    project.{{ projectName|lower }}.{{ entityName|lower }}.query.searchby.handler:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.query.searchby.handler.class%
        arguments: ["@project.{{ projectName|lower }}.{{ entityName|lower }}.process.manager"]

    ###################
    # COMMAND HANDLER #
    ###################

    #
    # new_{{ entityName }} command handler
    #
    project.{{ projectName|lower }}.{{ entityName|lower }}.command.new.handler:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.command.new.handler.class%
        arguments:
            - "@project.{{ projectName|lower }}.{{ entityName|lower }}.new.workflow.handler"

    #
    # new_{{ entityName }} command handler decorator
    #
    project.{{ projectName|lower }}.{{ entityName|lower }}.command.new.handler.decorator:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.command.new.handler.decorator.class%
        arguments:
            - "@project.{{ projectName|lower }}.{{ entityName|lower }}.command.new.handler"
            - "@project.{{ projectName|lower }}.{{ entityName|lower }}.validation.new.handler"
            - "@project.{{ projectName|lower }}.{{ entityName|lower }}.spec.new.handler"
    #
    # update_{{ entityName }} command handler
    #
    project.{{ projectName|lower }}.{{ entityName|lower }}.command.update.handler:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.command.update.handler.class%
        arguments:
          - "@project.{{ projectName|lower }}.{{ entityName|lower }}.update.workflow.handler"

    project.{{ projectName|lower }}.{{ entityName |lower}}.command.update.handler.decorator:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.command.update.handler.decorator.class%
        arguments:
            - "@project.{{ projectName|lower }}.{{ entityName|lower }}.command.update.handler"
            - "@project.{{ projectName|lower }}.{{ entityName|lower }}.validation.update.handler"
            - "@project.{{ projectName|lower }}.{{ entityName|lower }}.spec.update.handler"
    #
    # delete_{{ entityName }} command handler
    #
    project.{{ projectName|lower }}.{{ entityName|lower }}.command.delete.handler:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.command.delete.handler.class%
        arguments: ["@project.{{ projectName|lower }}.{{ entityName|lower }}.process.manager"]

    #
    # deleteMany_{{ entityName }} command handler
    #
    project.{{ projectName|lower }}.{{ entityName|lower }}.command.delete_many.handler:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.command.delete_many.handler.class%
        arguments: ["@project.{{ projectName|lower }}.{{ entityName|lower }}.process.manager"]

    ######################
    # VALIDATION HANDLER #
    ######################

    #
    # new_{{ entityName }} command Validation handler
    #
    project.{{ projectName|lower }}.{{ entityName|lower }}.validation.new.handler:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.validation.new.handler.class%
        arguments:
            - "@project.validator.strategy"

    #
    # update_{{ entityName }} command Validation handler
    #
    project.{{ projectName|lower }}.{{ entityName|lower }}.validation.update.handler:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.validation.update.handler.class%
        arguments:
            - "@project.validator.strategy"

    #################
    # SPECS HANDLER #
    #################

    #
    # new_{{ entityName }} command spec handler
    #
    project.{{ projectName|lower }}.{{ entityName|lower }}.spec.new.handler:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.spec.new.handler.class%
        calls:
            - [setObject, ["@security.authorization_checker"]]
            - [setLogger, ["@project.dddcontext.logger.application"]]

    #
    # update_{{ entityName|lower }} command spec handler
    #
    project.{{ projectName|lower }}.{{ entityName|lower }}.spec.update.handler:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.spec.update.handler.class%
        calls:
            - [setObject, ["@security.authorization_checker"]]
            - [setLogger, ["@project.dddcontext.logger.application"]]

    ###################
    # MANAGER HANDLER #
    ###################

    #
    # manager Configuration
    # project.{{ projectName|lower }}.{{ entityName|lower }}.repository.factory service is created by CreateRepositoryF{{ entityName }}yPass
    #
    project.{{ projectName|lower }}.{{ entityName|lower }}.process.manager:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.manager.class%
        arguments:
            - "@project.{{ projectName|lower }}.{{ entityName |lower}}.repository.factory"
        calls:
            - [setLogger, ["@project.dddcontext.logger.domain"]]
            - [addProcess, ["prepersist_create", "@project.{{ projectName|lower }}.{{ entityName|lower }}.new.prepersist.process"]]
            - [addProcess, ["postpersist_create", "@project.{{ projectName|lower }}.{{ entityName|lower }}.new.postpersist.process"]]
            - [addProcess, ["prepersist_update", "@project.{{ projectName|lower }}.{{ entityName|lower }}.new.prepersist.process"]]
            - [addProcess, ["postpersist_update", "@project.{{ projectName|lower }}.{{ entityName|lower }}.new.postpersist.process"]]

    ####################
    # WORKFLOW HANDLER #
    ####################

    #
    # new_{{ entityName }} workflow handler
    #
    project.{{ projectName|lower }}.{{ entityName|lower }}.new.workflow.handler:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.new.workflow.handler.class%
        calls:
            - [addObserver, ["@project.{{ projectName|lower }}.{{ entityName|lower }}.workflow.generate.valueobject"]]
#           - [addObserver, ["@project.{{ projectName|lower }}.{{ entityName |lower}}.workflow.publish.event"]]
            - [addObserver, ["@project.{{ projectName|lower }}.{{ entityName|lower }}.workflow.save.entity"]]

    #
    # update_{{ entityName }} workflow handler
    #
    project.{{ projectName|lower }}.{{ entityName |lower}}.update.workflow.handler:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.update.workflow.handler.class%
        calls:
            - [addObserver, ["@project.{{ projectName|lower }}.{{ entityName|lower }}.workflow.generate.valueobject"]]
            - [addObserver, ["@project.{{ projectName|lower }}.{{ entityName|lower }}.workflow.save.entity"]]
            #         - [addObserver, ["@project.{{ projectName|lower }}.{{ entityName |lower}}.workflow.publish.event"]]

            - [addObserver, ["@project.{{ projectName|lower }}.{{ entityName|lower }}.workflow.save.entity"]]


    project.{{ projectName }}.{{ entityName }}.workflow.generate.valueobject:
        class: %project.{{ projectName }}.{{ entityName }}.workflow.generate.valueobject.class%

    ##################
    # WORKFLOW EVENT #
    ##################

    #
    # {{ entityName }} Workflow save entity with doctrine
    #
    project.{{ projectName|lower }}.{{ entityName |lower}}.workflow.save.entity:
        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.workflow.save.entity.class%
        arguments:
            - "@project.{{ projectName|lower }}.{{ entityName |lower}}.process.manager"
        calls:
            - [setLogger, ["@project.dddcontext.logger.domain"]]

    #
    # {{ entityName }} Workflow publish event (@TODO)
    #
#    project.{{ projectName|lower }}.{{ entityName|lower }}.workflow.publish.event:
#        class: %project.{{ projectName|lower }}.{{ entityName|lower }}.workflow.publish.event.class%
#        arguments:
#            - "@project.{{ projectName|lower }}.{{ entityName|lower }}.process.manager"
#        calls:
#            - [setLogger, ["@project.dddcontext.logger.domain"]]


    #################
    # PROCESS #
    #################

    #
    # Example of listener on {{ entityName }}.pre.new event
    #
    project.{{ projectName|lower }}.{{ entityName |lower}}.new.prepersist.process:
        class: {{ projectName }}\Domain\Service\{{ entityName }}\Processor\PrePersistProcess
        calls:
            - [setLogger, ["@project.dddcontext.logger.domain"]]
    #
    # Example of listener on {{ entityName }}.post.new event
    #
    project.{{ projectName|lower }}.{{ entityName |lower}}.new.postpersist.process:
        class: {{ projectName }}\Domain\Service\{{ entityName }}\Processor\PostPersistProcess
        calls:
            - [setLogger, ["@project.dddcontext.logger.domain"]]

