<?php
declare(strict_types = 1);
namespace Tests\src\Email\Domain\Entity;

require_once __DIR__.'/../../TraitPrivateMethod.php';

use DemoCountry\Domain\Entity\Country;
use Phake;
use Tests\TraitPrivateMethod;

class CountryTest extends \PHPUnit_Framework_TestCase
{
    use TraitPrivateMethod;

    /**
     * @var Message
     */
    protected $indicatif;
    protected $libelle;
    protected $iso;
    protected $selectable;
    protected $reference;

    public function setUp()
    {
{% set constructorArgs = "" %}
{% for field in entityFields %}
{% if field.type="id" %}
        $this->{{ field.name }} = "2e647197-5b18-11e6-a55f-f8b156c6181f";
{% set constructorArgs = constructorArgs ~ "$"{{ field.name }} ~ ", " %}
{% else %}
        $this->{{ field.name }} = "abcd";
{% endif %}
        $this->country = Country::makeInstance(
            {{ constructorArgs|trim(", ") }}
        );
    }

    public function testGetters()
    {

{% for field in entityFields %}
        $this->assertEquals($this->{{ field.name }}, $this->country->ge{{ field.name|ucfirst }}());
{% endfor %}

    }

    public function testSetters()
    {

{% for field in entityFields %}
{% if %} field.type == "id"
    $this->country->setEntityId('2e647197-5b18-11e6-a55f-f8b156c6181f');
    $this->assertEquals('2e647197-5b18-11e6-a55f-f8b156c6181f', $this->country->getId()->id());
{% else %}
    $this->country->set{{ field.name|ucfirst }}('abc');
    $this->assertEquals('abc', $this->country->get{{ field.name|ucfirst }}());
{% endif %}
{% endfor %}

    }

}
